newgui repositories [ guinoautotab [ guistayopen [
  guititle "Content Repositories"
  guibar
  guilist [
    guilist [
      loopfiles _repositories_name "repositories" "" [
        if (&& (&& (! (strcmp $_repositories_name ".")) (! (strcmp $_repositories_name ".."))) (! (strcmp $_repositories_name ".svn"))) [
          guitext @_repositories_name
        ]
      ]
    ]
    guilist [
      loopfiles _repositories_name "repositories" "" [
        if (&& (&& (! (strcmp $_repositories_name ".")) (! (strcmp $_repositories_name ".."))) (! (strcmp $_repositories_name ".svn"))) [
          if (strcmp @_repositories_name "sauerbomber-base") [
            guitext "internal"
          ] [
            guibutton "update" [
              sleep 500 [
                repositoryupdate @@@_repositories_name
              ]
            ]
          ]
        ]
      ]
    ]
  ]
  guibar
  guitext (getrepositorymsg)
  guibar
  guititle "Add repository"
  guilist [
    guilist [
      guitext "name"
      guitext "url"
    ]
    guilist [
      guifield _repositories_add_name
      guifield _repositories_add_url
    ]
  ]
  guibutton "Add" [
    repositorycheckout $_repositories_add_name $_repositories_add_url
  ]
] ] ]
