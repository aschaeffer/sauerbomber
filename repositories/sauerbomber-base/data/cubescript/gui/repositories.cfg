newgui repositories [ guinoautotab [ guistayopen [
  if (= (getrepositoryworkers) 0) [
    guititle "List of Content Repositories"
    guibar
    guilist [
      guilist [
        guititle "Name"
        loopfiles _repositories_name "repositories" "" [
          if (&& (&& (! (strcmp $_repositories_name ".")) (! (strcmp $_repositories_name ".."))) (! (strcmp $_repositories_name ".svn"))) [
            guitext @_repositories_name
          ]
        ]
      ]
      guilist [
        guititle "Action"
        loopfiles _repositories_name "repositories" "" [
          if (&& (&& (! (strcmp $_repositories_name ".")) (! (strcmp $_repositories_name ".."))) (! (strcmp $_repositories_name ".svn"))) [
            if (strcmp @_repositories_name "sauerbomber-base") [
              guitext "internal"
            ] [
              guibutton "update" [
                sleep 500 [
                  repositoryupdate @@@_repositories_name
                ]
              ]
            ]
          ]
        ]
      ]
    ]
  ] [
    guistrut 10 5
    guititle "Updating Content Repository"
    guibar
    guitext (getrepositorymsg)
  ]
  guitab "Add repository"
  guititle "Add repository"
  guilist [
    guilist [
      guitext "name"
      guitext "url"
    ]
    guilist [
      guifield _repositories_add_name 40
      guifield _repositories_add_url 40
    ]
  ]
  guibutton "Add" [
    repositorycheckout $_repositories_add_name $_repositories_add_url
  ]
] ] ]

